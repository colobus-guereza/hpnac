# 핸드팬 웹앱 개발 노트

이 문서는 핸드팬 웹앱의 주요 구성요소와 자주 수정되는 항목들을 정리한 개발 노트입니다. 
더 자세한 CSS 인덱스는 [CSS_INDEX.md](CSS_INDEX.md) 파일을 참조하세요.

## 주요 파일 구조

- **index.html**: 메인 HTML 파일
- **styles.css**: 모든 스타일 정의
- **script.js**: 자바스크립트 기능 구현
- **service-worker.js**: PWA 서비스 워커
- **manifest.json**: PWA 매니페스트 파일
- **images/**: 이미지 폴더

## 자주 수정되는 항목

### 1. 홈 화면 버튼 레이아웃

홈 화면의 버튼은 `script.js` 파일의 `homeView()` 함수에서 정의합니다.

```javascript
// script.js의 355-392 줄
function homeView() {
    document.querySelector('.container').innerHTML = `
        <div class="content-wrapper" style="width: 100%; max-width: 100%;">
            <header class="hidden-header">
                <!-- 타이틀 제거 -->
            </header>
            <div class="profile-icon-container"></div>
            <div class="map-brand">Snd Handpan Academy</div>
            <div class="map-container" style="height: 190px; min-height: 190px; max-height: 190px; margin-bottom: 20px;">
                <div class="map-title">레슨예약 & 공연문의</div>
                <div class="map-background" id="location-map"></div>
            </div>
            <main style="width: 100%; max-width: 100%; padding-top: 10px;">
                <div class="button-container" style="width: 100%; max-width: 100%; margin-top: 20px;">
                    <!-- 버튼들 -->
                </div>
            </main>
        </div>
    `;
}
```

### 2. 버튼 스타일 수정

버튼의 기본 스타일은 `styles.css`에서 다음과 같이 정의됩니다:

- 메인 버튼: `.main-button` (324-341 줄)
- 홈 화면 버튼: `.button-1` ~ `.button-7` (342-371 줄)
- 카카오/전화 버튼 높이: `.main-button.button-5`, `.main-button.button-6` (2558-2582 줄)

예를 들어, 버튼 높이를 수정하려면:

```css
/* styles.css의 2558-2564 줄 */
.main-button.button-5 {
    height: 55px;  /* 이 값을 수정 */
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 15px 0 !important;  /* 패딩 값 조정 */
    box-sizing: border-box;
}

/* styles.css의 2575-2589 줄 */
.main-button.button-6 {
    height: 55px;  /* 이 값을 수정 */
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 15px 0 !important;  /* 패딩 값 조정 */
    box-sizing: border-box;
}
```

카카오 아이콘과 전화 아이콘의 크기를 수정하려면:

```css
/* 카카오 아이콘 스타일 - styles.css의 2544-2554 줄 */
.kakao-icon-container {
    width: 24px;  /* 아이콘 너비 */
    height: 24px;  /* 아이콘 높이 */
    background-image: url('images/optimized/kakao-optimized.png');
    background-size: 100%;  /* 배경 크기 (100%로 설정하여 정확한 비율 유지) */
    /* 기타 스타일 */
}

/* 전화 아이콘 스타일 - styles.css의 2583-2589 줄 */
.main-button.button-6 i.fa-phone {
    font-size: 24px;  /* 아이콘 크기 */
    line-height: 1;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}
```

두 버튼의 높이가 동일하게 보이지 않는 문제는 주로 내부 아이콘 크기, 패딩, 박스 사이징 차이에서 발생합니다. 위와 같이 아이콘 크기를 동일하게 맞추고, 버튼에 동일한 패딩과 박스 사이징을 적용하면 해결됩니다.

### 3. 지도 크기 조정

지도 컨테이너 크기는 `script.js`의 `setMapContainerSize()` 함수에서 설정합니다:

```javascript
// script.js의 221-242 줄
function setMapContainerSize() {
    const mapContainer = document.querySelector('.map-container');
    if (mapContainer) {
        // 기존 스타일을 유지하면서 특정 속성만 덮어쓰는 방식으로 수정
        const existingStyles = mapContainer.getAttribute('style') || '';
        const styles = existingStyles.split(';').filter(style =>
            !style.includes('height') &&
            !style.includes('min-height') &&
            !style.includes('max-height') &&
            style.trim() !== ''
        ).join(';');

        // 새로운 스타일 설정 (기존 스타일 유지 + 크기 속성 추가)
        const newStyles = `${styles}; height: 190px !important; min-height: 190px !important; max-height: 190px !important;`;
        mapContainer.setAttribute('style', newStyles);
    }
}
```

지도 크기를 변경하려면 위 함수의 `height: 190px` 값을 수정하세요.

### 4. 스크롤 활성화/비활성화

페이지별 스크롤 설정은 각 뷰 함수에서 관리합니다:

```javascript
// 스크롤 비활성화 예시 (script.js)
document.body.classList.add('no-scroll-home');  // 스크롤 비활성화
document.body.classList.remove('no-scroll-home');  // 스크롤 활성화
```

`.no-scroll-home` 클래스는 `styles.css`의 62-80 줄에 정의되어 있습니다.

### 5. 폰트 크기 조정

- 기본 버튼 폰트 크기: `--button-font-size` (56 줄)
- 모바일 환경 폰트 크기: `:root` 재정의 (1845-1853 줄)
- FAQ 페이지 폰트 크기: `--faq-question-font-size`, `--faq-answer-font-size`, `--faq-mobile-question-font-size`, `--faq-mobile-answer-font-size` (58-61 줄)

전체 애플리케이션의 폰트 크기를 일괄 조정하려면 CSS 변수를 수정하세요:

```css
/* styles.css의 43-61 줄 */
:root {
    /* 기존 변수들 */
    --button-font-size: 18px;  /* 이 값을 수정 */
    
    /* FAQ 페이지 폰트 크기 변수 */
    --faq-question-font-size: 18px;  /* FAQ 질문 폰트 크기 */
    --faq-answer-font-size: 18px;  /* FAQ 답변 폰트 크기 */
    --faq-mobile-question-font-size: 16px;  /* 모바일 FAQ 질문 폰트 크기 */
    --faq-mobile-answer-font-size: 14px;  /* 모바일 FAQ 답변 폰트 크기 */
}
```

FAQ 페이지의 모든 폰트 크기는 위 변수들을 통해 한 번에 관리할 수 있습니다.

### 6. 컬러 스키마 변경

앱의 색상 테마는 CSS 변수로 정의되어 있습니다:

```css
/* styles.css의 1-30 줄 */
:root {
    --bg-color: #F7F7F2;
    --body-bg: #F7F7F2;
    --container-bg: #FFFFFF;
    --primary-color: #E8E8D8;
    --secondary-color: #F2F2E6;
    /* 기타 색상 변수들 */
}
```

다크 모드 색상은 `.dark-theme` 클래스에서 재정의됩니다 (82-114 줄).

## 커스텀 기능 추가 방법

### 1. 새로운 페이지 추가

1. `script.js`에 새로운 뷰 함수 추가:

```javascript
function newPageView() {
    document.querySelector('.container').innerHTML = `
        <button class="back-button" onclick="navigateTo('/previous-page')">
            <span class="back-arrow">←</span>
        </button>
        <header>
            <h1>새 페이지 제목</h1>
        </header>
        <main>
            <!-- 페이지 콘텐츠 -->
        </main>
    `;
}
```

2. 라우트 등록:

```javascript
// script.js의 약 217 줄 주변
const routes = {
    '/': homeView,
    // 기존 라우트들
    '/new-page': newPageView  // 새 페이지 추가
};
```

3. 링크 추가:

```javascript
// 새 페이지로 이동하는 버튼 예시
<button class="main-button" onclick="navigateTo('/new-page')">
    새 페이지로 이동
</button>
```

### 2. 새로운 스타일 추가

새로운 스타일은 `styles.css` 파일 하단에 추가하는 것이 좋습니다:

```css
/* 새로운 컴포넌트 스타일 */
.new-component {
    background-color: var(--primary-color);
    padding: 15px;
    border-radius: var(--card-border-radius);
    /* 추가 스타일 */
}
```

CSS 변수를 활용하면 기존 디자인 시스템과 일관성을 유지할 수 있습니다.

## 성능 최적화 팁

1. **이미지 최적화**
   - WebP 형식 사용
   - 적절한 크기로 리사이징
   - `loading="eager"`를 중요 이미지에 추가

2. **CSS 최적화**
   - 사용하지 않는 스타일 제거
   - 미디어 쿼리 활용
   - CSS 변수 활용

3. **JavaScript 최적화**
   - 이벤트 위임 활용
   - 불필요한 DOM 조작 최소화
   - 지연 로딩 활용

## 커밋 및 배포 방법

1. 변경사항 스테이징:
```bash
git add .
```

2. 변경사항 커밋:
```bash
git commit -m "변경 내용 설명"
```

3. 원격 저장소에 푸시:
```bash
git push origin main
```

4. 태그 생성 (버전 관리용):
```bash
git tag -a v1.0.0 -m "버전 1.0.0 릴리스"
git push origin v1.0.0
``` 